<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>El Malasaña en la Estratosfera</title>
  <meta name="author" content="Begoña Dosantos"/>
  <script src="https://aframe.io/releases/1.2.0/aframe.min.js"></script>
  <script src="https://cdn.rawgit.com/donmccurdy/aframe-extras/v4.1.2/dist/aframe-extras.min.js"></script>
  <script src="https://cdn.rawgit.com/donmccurdy/aframe-physics-system/v3.3.0/dist/aframe-physics-system.min.js"></script>

  <!-- Componente personalizado para movimiento automático rápido -->
  <script>
    AFRAME.registerComponent("auto-move", {
      schema: {
        speed: { type: "number", default: 1 }
      },
      tick: function () {
        const direction = new THREE.Vector3();
        this.el.object3D.getWorldDirection(direction);
        this.el.object3D.position.add(direction.multiplyScalar(this.data.speed));
      }
    });
  </script>
</head>
<body>
  <a-scene physics="debug: false">
    <!-- Carga de modelos y vídeos -->
    <a-assets>
      <a-asset-item id="museo-glb" src="museo.glb"></a-asset-item>
      <a-asset-item id="globo-glb" src="globo.glb"></a-asset-item>
      <a-asset-item id="Gelectronica-glb" src="Gelectronica.glb"></a-asset-item>
      <video id="videoLanzamiento" src="lanzamiento.mp4" autoplay loop></video>
      <video id="videoEstratosfera" src="estratosfera.mp4" autoplay loop></video>
    </a-assets>

    <!-- Cámara VR -->
    <a-entity id="cameraRig" position="0 1.6 0">
      <a-entity
        id="camera"
        camera
        look-controls
        wasd-controls="acceleration: 50"
        position="0 0 0">
      </a-entity>
    </a-entity>

    <!-- Modelo 3D del museo -->
    <a-entity gltf-model="#museo-glb" scale="2 1 2" position="0 0 0" static-body>
      <a-entity gltf-model="#globo-glb" scale="0.25 0.25 0.25" position="-3 2.5 6" rotation="90 -90 90"></a-entity>
      <a-entity gltf-model="#Gelectronica-glb" scale="0.15 0.15 0.15" position="-0.25 4 -1.25" rotation="90 0 90"></a-entity>
      <a-plane src="#videoLanzamiento" position="-5.5 2 -1" width="1" height="1" rotation="0 90 0"></a-plane>
      <a-plane src="#videoEstratosfera" position="-3 2 0" width="2" height="1"></a-plane>
    </a-entity>
  </a-scene>

  <script>
    document.addEventListener("DOMContentLoaded", function () {
      const isMobile = /Android|iPhone|iPad|iPod/i.test(navigator.userAgent);
      const camera = document.querySelector("#camera");

      if (isMobile) {
        document.querySelector("a-scene").addEventListener("enter-vr", function () {
          // Velocidad muy alta (ajustable)
          camera.setAttribute("auto-move", "speed: 10000");
        });

        document.querySelector("a-scene").addEventListener("exit-vr", function () {
          camera.removeAttribute("auto-move");
        });
      }
    });
  </script>
</body>
</html>


